<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LCTA - 边狱公司汉化工具箱</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown-light.min.css">
</head>
<body class="theme-light">
    <div class="theme-toggle">
        <button class="theme-btn active" data-theme="light" title="亮色主题">
            <i class="fas fa-sun"></i>
        </button>
        <button class="theme-btn" data-theme="dark" title="暗色主题">
            <i class="fas fa-moon"></i>
        </button>
        <button class="theme-btn" data-theme="purple" title="蓝紫色主题">
            <i class="fas fa-palette"></i>
        </button>
    </div>

    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-language"></i>
                <h2>LCTA <span class="version">v4.1.1</span></h2>
            </div>
            <p class="subtitle">边狱公司汉化工具箱</p>
        </div>

        <div class="sidebar-menu">
            <button id="translate-btn" class="nav-btn active">
                <i class="fas fa-language"></i>
                <span>翻译工具</span>
                <div class="nav-indicator"></div>
            </button>
            
            <button id="install-btn" class="nav-btn">
                <i class="fas fa-download"></i>
                <span>安装已有汉化</span>
            </button>
            
            <button id="download-btn" class="nav-btn">
                <i class="fas fa-users"></i>
                <span>汉化包下载</span>
            </button>
            
            <button id="clean-btn" class="nav-btn">
                <i class="fas fa-broom"></i>
                <span>清除本地缓存</span>
            </button>

            <button id="manage-btn" class="nav-btn">
                <i class="fas fa-archive"></i>
                <span>已安装数据管理</span>
            </button>

            <button id="launcher-config-btn" class="nav-btn">
                <i class="fas fa-rocket"></i>
                <span>Launcher配置</span>
            </button>

            <button id="config-btn" class="nav-btn">
                <i class="fas fa-cog"></i>
                <span>配置汉化api</span>
            </button>
            
            <button id="proper-btn" class="nav-btn">
                <i class="fas fa-book"></i>
                <span>抓取专有词汇</span>
            </button>
            
            <button id="log-btn" class="nav-btn">
                <i class="fas fa-clipboard-list"></i>
                <span>日志</span>
            </button>
            
            <button id="about-btn" class="nav-btn">
                <i class="fas fa-info-circle"></i>
                <span>关于</span>
            </button>
            
            <button id="settings-btn" class="nav-btn">
                <i class="fas fa-sliders-h"></i>
                <span>设置</span>
            </button>

            <button id="test-btn" class="nav-btn" style="display: none;">
                <i class="fas fa-sliders-h"></i>
                <span>测试界面</span>
            </button>
        </div>

        <div class="sidebar-footer">
            <div class="status-indicator">
                <div class="status-dot connected"></div>
                <span>已连接</span>
            </div>
        </div>
    </div>

    <div class="main-content">
        <!-- 翻译工具界面 -->
        <div class="content-section active" id="translate-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-language"></i>
                    翻译工具
                </h2>
                <p class="section-subtitle">使用多种翻译服务自动翻译游戏文本</p>
            </div>
            
            <div class="settings-grid">
                <div class="setting-card">
                    <h3 class="setting-title">翻译选项</h3>

                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="enable-proper" onchange="toggleProper()">
                            <span class="checkmark"></span>
                            启用专有名词 (LLM翻译专用)
                        </label>
                    </div>

                    <div id="proper-settings">
                        <div class="form-group">
                            <label class="checkbox-container">
                                <input type="checkbox" id="auto-fetch-proper" onchange="toggleAutoProper()">
                                <span class="checkmark"></span>
                                在进行翻译时自动抓取专有词汇 (无法使用自定义设置)
                            </label>
                        </div>
                        
                        <div class="form-group" id="proper-path-text">
                            <label for="proper-path-text">专有名词json路径</label>
                            <div class="file-input-group">
                                <input type="text" id="proper-path" placeholder="选择专有名词json文件">
                                <button class="action-btn secondary" 
                                onclick="pywebview.api.browse_file('proper-path')">
                                    <i class="fas fa-folder-open"></i> 浏览
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="enable-role" onchange="toggleProper()">
                            <span class="checkmark"></span>
                            启用人物角色标识 (LLM翻译专用)
                        </label>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="enable-skill" onchange="toggleProper()">
                            <span class="checkmark"></span>
                            启用状态效果标识 (LLM翻译专用)
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="enable-dev-settings" onchange="toggleDevelopSettings()">
                            <span class="checkmark"></span>
                            启用高级选项
                        </label>
                    </div>

                    <div id="dev-settings" style="display: none;">
                        <div class="form-group" id="kr-path-text">
                            <label for="kr-path-text">韩文文本路径</label>
                            <div class="file-input-group">
                                <input type="text" id="kr-path" placeholder="选择韩文文本文件夹">
                                <button class="action-btn secondary" 
                                onclick="pywebview.api.browse_folder('kr-path')">
                                    <i class="fas fa-folder-open"></i> 浏览
                                </button>
                            </div>
                        </div>

                        <div class="form-group" id="jp-path-text">
                            <label for="jp-path-text">日文文本路径</label>
                            <div class="file-input-group">
                                <input type="text" id="jp-path" placeholder="选择日文文本文件夹">
                                <button class="action-btn secondary"
                                 onclick="pywebview.api.browse_folder('jp-path')">
                                    <i class="fas fa-folder-open"></i> 浏览
                                </button>
                            </div>
                        </div>

                        <div class="form-group" id="en-path-text">
                            <label for="en-path-text">英文文本路径</label>
                            <div class="file-input-group">
                                <input type="text" id="en-path" placeholder="选择英文文本文件夹">
                                <button class="action-btn secondary"
                                 onclick="pywebview.api.browse_folder('en-path')">
                                    <i class="fas fa-folder-open"></i> 浏览
                                </button>
                            </div>
                        </div>

                        <div class="form-group" id="llc-path-text">
                            <label for="llc-path-text">中文文本路径</label>
                            <div class="file-input-group">
                                <input type="text" id="llc-path" placeholder="选择中文文本文件夹">
                                <button class="action-btn secondary"
                                 onclick="pywebview.api.browse_folder('llc-path')">
                                    <i class="fas fa-folder-open"></i> 浏览
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="checkbox-container">
                                <input type="checkbox" id="has-prefix" checked>
                                <span class="checkmark"></span>
                                文件名存在前缀
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="setting-card">
                    <h3 class="setting-title">翻译服务配置</h3>
                    <div class="form-group">
                        <label for="translation-service">翻译服务:</label>
                        <div class="translator-services">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="fallback" checked>
                            <span class="checkmark"></span>
                            失败时进行相反重试 (LLM翻译专用)
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="is-text" checked>
                            <span class="checkmark"></span>
                            使用文本格式进行请求 (LLM翻译专用)
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="from-lang">使用源语言 (除LLM翻译外使用):</label>
                        <div class="select-wrapper">
                            <select id="from-lang">
                                <option value="EN">英文</option>
                                <option value="JP">日文</option>
                                <option value="KR">韩文</option>
                            </select>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="action-area">
                <button class="primary-btn" onclick="startTranslation()">
                    <i class="fas fa-play"></i>
                    开始翻译
                </button>
            </div>
        </div>

        <!-- 安装汉化界面 -->
        <div id="install-section" class="content-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-download"></i>
                    安装已有汉化
                </h2>
                <p class="section-subtitle">选择并安装本地汉化包</p>
            </div>
            
            <div class="settings-grid">
                <div class="setting-card">
                    <h3 class="setting-title">汉化包目录</h3>
                    <div class="form-group">
                        <label for="install-package-directory">汉化包目录:</label>
                        <div class="file-input-group">
                            <div class="input-wrapper">
                                <input type="text" id="install-package-directory" placeholder="留空则使用程序所在目录">
                                <button type="button" class="input-clear" onclick="clearPackageDirectory()" title="清空目录设置">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <button type="button" class="action-btn secondary" onclick="browseInstallPackageDirectory()">
                                <i class="fas fa-folder-open"></i> 浏览
                            </button>
                        </div>
                        <small class="form-hint">选择存放汉化包的目录，留空则使用程序所在目录</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="install-package-list">可用汉化包:</label>
                        <div class="list-container">
                            <div class="list-header">
                                <span>包名称</span>
                                <span>操作</span>
                            </div>
                            <div class="list-content" id="install-package-list">
                                <div class="list-empty">
                                    <i class="fas fa-box-open"></i>
                                    <p>未找到可用的汉化包</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="button-group">
                        <button type="button" class="action-btn" onclick="refreshInstallPackageList()">
                            <i class="fas fa-sync-alt"></i> 刷新列表
                        </button>
                        <button type="button" class="action-btn success" onclick="installSelectedPackage()">
                            <i class="fas fa-check-circle"></i> 安装选中汉化包
                        </button>
                        <button type="button" class="action-btn danger" onclick="deleteSelectedPackage()">
                            <i class="fas fa-trash"></i> 删除选中汉化包
                        </button>
                    </div>
                </div>
                
                <div class="setting-card">
                    <h3 class="setting-title">字体管理</h3>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-font"></i>
                            </div>
                            <h4>更换字体</h4>
                            <p>为选中的汉化包更换字体</p>
                            <button class="feature-btn" onclick="changeFontForPackage()">
                                更换字体
                            </button>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-file-export"></i>
                            </div>
                            <h4>导出字体</h4>
                            <p>从已安装字体中获取文件</p>
                            <button class="feature-btn" onclick="getFontFromInstalled()">
                                导出字体
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 下载界面 -->
        <div id="download-section" class="content-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fab fa-google-play"></i>
                    从各个平台下载汉化
                </h2>
                <p class="section-subtitle">下载各个来源的汉化包</p>
            </div>
            
            <div class="settings-grid">
                <div class="setting-card">
                    <h3 class="setting-title">ourplay下载配置</h3>
                    <div class="form-group">
                        <label for="ourplay-font-option">字体处理选项:</label>
                        <div class="select-wrapper">
                            <select id="ourplay-font-option">
                                <option value="keep">保留原字体</option>
                                <option value="simplify">精简字体</option>
                                <option value="llc">使用本地字体缓存</option>
                            </select>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="ourplay-check-hash" checked>
                            <span class="checkmark"></span>
                            启用哈希校验
                        </label>
                        <small class="form-hint">确保下载文件的完整性</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="ourplay-use-api">
                            <span class="checkmark"></span>
                            使用API获取链接
                        </label>
                    </div>
                    
                    <div class="action-area">
                        <button class="primary-btn" onclick="downloadOurplay()">
                            <i class="fas fa-download"></i>
                            下载OurPlay汉化包
                        </button>
                    </div>
                </div>
                
                <div class="setting-card">
                    <h3 class="setting-title">零协会下载配置</h3>
                    <div class="form-group">
                        <label for="llc-zip-type">压缩格式:</label>
                        <div class="select-wrapper">
                            <select id="llc-zip-type">
                                <option value="zip">ZIP格式</option>
                                <option value="seven">7Z格式</option>
                            </select>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="llc-download-source">文本下载来源:</label>
                        <div class="select-wrapper">
                            <select id="llc-download-source">
                                <option value="github">从github下载</option>
                                <option value="mirror">从公益镜像下载 beta</option>
                            </select>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="llc-use-proxy" checked>
                            <span class="checkmark"></span>
                            使用代理加速下载
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="llc-use-cache">
                            <span class="checkmark"></span>
                            使用本地字体缓存
                        </label>
                        <small class="form-hint">使用本地已有的字体文件，加快下载速度</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="llc-dump-default">
                            <span class="checkmark"></span>
                            保存原始文件而不打包
                        </label>
                        <small class="form-hint">保存解压后的原始文件而非打包格式</small>
                    </div>
                    
                    <div class="action-area">
                        <button class="primary-btn" onclick="downloadLLC()">
                            <i class="fas fa-download"></i>
                            下载零协汉化包
                        </button>
                    </div>
                </div>

                <div class="setting-card">
                    <h3 class="setting-title">LCTA-AU下载配置</h3>
                    
                    <div class="form-group">
                        <label for="machine-download-source">文本下载来源:</label>
                        <div class="select-wrapper">
                            <select id="machine-download-source">
                                <option value="github">从github下载</option>
                                <option value="mirror">从公益镜像下载 beta</option>
                            </select>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="machine-use-proxy" checked>
                            <span class="checkmark"></span>
                            使用代理加速下载
                        </label>
                    </div>
                    
                    <div class="action-area">
                        <button class="primary-btn" onclick="downloadMachine()">
                            <i class="fas fa-download"></i>
                            下载LCTA-AU汉化包
                        </button>
                    </div>
                </div>

                <div class="setting-card">
                    <h3 class="setting-title">气泡Mod下载配置</h3>

                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="bubble-color">
                            <span class="checkmark"></span>
                            下载有颜色的气泡Mod
                        </label>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="bubble-install">
                            <span class="checkmark"></span>
                            立即安装
                        </label>
                    </div>

                    <div class="action-area">
                        <button class="primary-btn" onclick="downloadBubble()">
                            <i class="fas fa-download"></i>
                            下载(安装)气泡mod
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 清除缓存界面 -->
        <div id="clean-section" class="content-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-broom"></i>
                    清除本地缓存
                </h2>
                <p class="section-subtitle">清理缓存文件，通过初始化解决一些问题</p>
            </div>
            
            <div class="settings-grid">
                <div class="setting-card">
                    <h3 class="setting-title">清理选项</h3>
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="clean-progress" checked>
                            <span class="checkmark"></span>
                            清理进度文件
                        </label>
                        <small class="form-hint">清除游戏进度文件，包括存档数据</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="clean-notice" checked>
                            <span class="checkmark"></span>
                            清理通知文件
                        </label>
                        <small class="form-hint">清除游戏通知数据</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="clean-mods" checked>
                            <span class="checkmark"></span>
                            清理默认mod资源
                        </label>
                        <small class="form-hint">清除默认mod目录对应资源</small>
                    </div>
                    
                    <div class="form-group">
                        <label>自定义清理文件/文件夹:</label>
                        <div class="file-input-group">
                            <input type="text" id="custom-file-path" placeholder="输入或浏览选择要清理的文件或文件夹">
                            <button class="action-btn secondary" onclick="browseCustomFile()">
                                <i class="fas fa-file"></i> 文件
                            </button>
                            <button class="action-btn secondary" onclick="browseCustomFolder()">
                                <i class="fas fa-folder"></i> 文件夹
                            </button>
                        </div>
                        <button class="action-btn small" onclick="addCustomFile()" style="margin-top: 10px;">
                            <i class="fas fa-plus"></i> 添加到清理列表
                        </button>
                        <small class="form-hint">指定要清理的额外文件或文件夹路径</small>
                    </div>
                    
                    <div class="form-group">
                        <div class="file-list-header">
                            <label>清理列表:</label>
                            <button class="action-btn small" onclick="clearCustomFilesList()">
                                <i class="fas fa-trash-alt"></i> 清空列表
                            </button>
                        </div>
                        <div class="file-list-container">
                            <div class="file-list" id="custom-files-list">
                                <!-- 自定义文件列表将通过JavaScript动态添加 -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="setting-card warning">
                    <div class="warning-header">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>警告</h3>
                    </div>
                    <p>此操作将清除本地的游戏进度和通知文件，以及您指定的自定义文件。这些操作不可逆，请谨慎操作。</p>
                    
                    <div class="action-area">
                        <button class="action-btn danger" onclick="cleanCache()">
                            <i class="fas fa-trash-alt"></i>
                            清除缓存
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 已安装管理界面 -->
        <div id="manage-section" class="content-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-download"></i>
                    已安装数据管理
                </h2>
                <p class="section-subtitle">控制本地已安装修改包，包括汉化包和皮肤mod</p>
            </div>
            
            <div class="settings-grid">
                <div class="setting-card">
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="enable-lang" onchange="toggleCustomLang()" checked>
                            <span class="checkmark"></span>
                            启用客制化翻译
                        </label>
                    </div>
                    
                    <div id="installed-package-group">
                        <div class="form-group">
                            <label for="installed-package-list">已安装汉化包:</label>
                            <div class="list-container">
                                <div class="list-header">
                                    <span>包名称</span>
                                    <span>操作</span>
                                </div>
                                <div class="list-content" id="installed-package-list">
                                    <div class="list-empty">
                                        <i class="fas fa-box-open"></i>
                                        <p>未找到已安装汉化包</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="button-group">
                            <button type="button" class="action-btn" onclick="refreshInstalledPackageList()">
                                <i class="fas fa-sync-alt"></i> 刷新列表
                            </button>
                            <button type="button" class="action-btn success" onclick="useSelectedPackage()">
                                <i class="fas fa-check-circle"></i> 使用选中汉化包
                            </button>
                            <button type="button" class="action-btn danger" onclick="deleteInstalledSelectedPackage()">
                                <i class="fas fa-trash"></i> 删除选中汉化包
                            </button>
                        </div>
                    </div>
                </div>

                <div class="setting-card">
                    <h3 class="setting-title">模组目录</h3>
                    <div class="form-group">
                        <label for="installed-mod-directory">模组安装目录:</label>
                        <div class="file-input-group">
                            <div class="input-wrapper">
                                <input type="text" id="installed-mod-directory" placeholder="留空则使用默认路径">
                                <button type="button" class="input-clear" onclick="clearModDirectory()" title="清空目录设置">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <button type="button" class="action-btn secondary" onclick="browseInstallModDirectory()">
                                <i class="fas fa-folder-open"></i> 浏览
                            </button>
                        </div>
                        <small class="form-hint">选择存放模组的目录，留空则使用默认目录</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="install-mod-list">可用模组:</label>
                        <div class="list-container">
                            <div class="list-header">
                                <span>模组名称</span>
                                <span>操作</span>
                            </div>
                            <div class="list-content" id="install-mod-list">
                                <div class="list-empty">
                                    <i class="fas fa-box-open"></i>
                                    <p>未找到可用的模组</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="button-group">
                        <button type="button" class="action-btn" onclick="refreshInstalledModList()">
                            <i class="fas fa-sync-alt"></i> 刷新列表
                        </button>
                        <button type="button" class="action-btn success" onclick="openModPath()">
                            <i class="fas fa-check-circle"></i> 打开mod文件夹
                        </button>
                        <button type="button" class="action-btn danger" onclick="deleteSelectedMod()">
                            <i class="fas fa-trash"></i> 删除选中模组
                        </button>
                    </div>
                </div>

                <div class="setting-card" style="display: none;">
                    <h3 class="setting-title">
                        <i class="fas fa-link"></i>
                        游戏数据软链接管理
                    </h3>
                    <p class="form-hint">管理 Unity 和 ProjectMoon 数据目录的符号链接，便于迁移数据。</p>
                    
                    <div id="symlink-status">
                        <!-- 状态将通过 JavaScript 动态填充 -->
                        <div class="list-empty">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>正在加载状态...</p>
                        </div>
                    </div>

                    <div class="button-group" style="margin-top: 16px;">
                        <button class="action-btn" onclick="createSymlink('unity')" 
                        id="unity-create" style="display: none;">
                            <i class="fas fa-plus"></i> 创建或转移 Unity 软链接
                        </button>
                        <button class="action-btn" onclick="createSymlink('pm')"
                        id="pm-create" style="display: none;">
                            <i class="fas fa-plus"></i> 创建或转移 ProjectMoon 软链接
                        </button>
                    </div>
                    <div class="button-group" style="margin-top: 8px;">
                        <button class="action-btn danger" onclick="removeSymlink('unity')" 
                        id="unity-remove" style="display: none;">
                            <i class="fas fa-times"></i> 移除 Unity 软链接
                        </button>
                        <button class="action-btn danger" onclick="removeSymlink('pm')" 
                        id="pm-remove" style="display: none;">
                            <i class="fas fa-times"></i> 移除 ProjectMoon 软链接
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 配置API界面 -->
        <div id="config-section" class="content-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-cog"></i>
                    配置汉化API
                </h2>
                <p class="section-subtitle">配置翻译服务API密钥</p>
            </div>
            
            <div class="settings-grid">
                <div class="setting-card">
                    <h3 class="setting-title">API配置</h3>
                    <div class="form-group">
                        <label for="api-service">选择翻译服务:</label>
                        <!-- 配置API选择容器 -->
                        <div class="api-select">
                        </div>
                    </div>
                    
                    <!-- API设置容器 -->
                    <div class="api-settings"></div>
                    
                    <div class="action-area">
                        <button class="primary-btn" onclick="apiConfigManager.saveCurrentSettings()">
                            <i class="fas fa-save"></i>
                            保存配置
                        </button>

                        <button class="primary-btn" onclick="apiConfigManager.testAPIConfig()">
                            <i class="fas fa-save"></i>
                            测试api
                        </button>
                    </div>
                </div>
                
                <div class="setting-card">
                    <h3 class="setting-title">服务状态</h3>
                    <!-- API状态容器 -->
                    <div class="api-status-grid">
                    </div>
                </div>
            </div>
        </div>

        <!-- 专有词汇界面 -->
        <div id="proper-section" class="content-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-book"></i>
                    抓取专有词汇
                </h2>
                <p class="section-subtitle">从文本中提取专有名词和术语</p>
            </div>
            
            <div class="settings-grid">
                <div class="setting-card">
                    <h3 class="setting-title">抓取配置</h3>
                    <div class="form-group">
                        <label for="proper-output">输出格式:</label>
                        <div class="select-wrapper">
                            <select id="proper-output">
                                <option value="json">JSON格式</option>
                                <option value="single">单文件格式</option>
                                <option value="double">双文件格式</option>
                            </select>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="proper-skip-space">
                            <span class="checkmark"></span>
                            跳过含空格的词汇
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label for="proper-max-count">最大词汇数量:</label>
                        <div class="input-with-icon">
                            <i class="fas fa-hashtag"></i>
                            <input type="number" id="proper-max-count" placeholder="例如：100">
                        </div>
                        <small class="form-hint">留空表示无限制</small>
                    </div>

                    <div class="form-group">
                        <label for="proper-min-count">最短专有名词数长度，减少错误匹配:</label>
                        <div class="input-with-icon">
                            <i class="fas fa-hashtag"></i>
                            <input type="number" id="proper-min-count" placeholder="例如：2">
                        </div>
                        <small class="form-hint">留空表示无限制</small>
                    </div>

                    <div class="form-group">
                        <label for="proper-join-char">分隔符(仅在单文本格式输出有效)</label>
                        <div class="input-with-icon">
                            <i class="fas fa-hashtag"></i>
                            <input type="text" id="proper-join-char" placeholder="例如：,">
                        </div>
                        <small class="form-hint">指定单词之间的分隔符，留空则使用逗号</small>
                    </div>
                    
                    <div class="action-area">
                        <button class="primary-btn" onclick="fetchProperNouns()">
                            <i class="fas fa-search"></i>
                            抓取专有词汇
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 关于界面 -->
        <div id="about-section" class="content-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-info-circle"></i>
                    关于 LCTA
                </h2>
                <p class="section-subtitle">边狱公司汉化工具箱</p>
            </div>
            
            <div class="about-container">
                <div class="about-card">
                    <div class="about-header">
                        <div class="about-logo">
                            <i class="fas fa-language"></i>
                        </div>
                        <div class="about-title">
                            <h3>LCTA - 边狱公司汉化工具箱</h3>
                            <p class="version-badge">版本 4.1.1</p>
                        </div>
                    </div>
                    
                    <div class="markdown-body"> 
                        <div class="about-content"></div>
                    </div>
                </div>

                <div class="about-card">
                    <div class="about-header">
                        <div class="about-logo">
                            <i class="fas fa-language"></i>
                        </div>
                        <div class="about-title">
                            <h3>更新内容</h3>
                            <p class="version-badge">版本 4.1.1</p>
                        </div>
                    </div>
                    
                    <div class="markdown-body"> 
                        <div class="update-content"></div>
                    </div>
                </div>

                <div class="about-card">
                    <div class="about-header">
                        <div class="about-logo">
                            <i class="fas fa-language"></i>
                        </div>
                        <div class="about-title">
                            <h3>引导</h3>
                            <p class="version-badge">版本 4.1.1</p>
                        </div>
                    </div>
                    
                    <div class="markdown-body"> 
                        <div class="use-help"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 日志界面 -->
        <div id="log-section" class="content-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-clipboard-list"></i>
                    日志
                </h2>
                <p class="section-subtitle">查看系统运行日志</p>
            </div>
            
            <div class="log-container">
                
                <div class="log-display" id="log-display">
                    <div class="log-entry info">
                        <div class="log-timestamp">[2025-01-01 12:00:00]</div>
                        <div class="log-level">[INFO]</div>
                        <div class="log-message">系统已启动，准备就绪</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 设置界面 -->
        <div id="settings-section" class="content-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-sliders-h"></i>
                    设置
                </h2>
                <p class="section-subtitle">程序配置与选项</p>
            </div>
            
            <div class="settings-grid">
                <div class="setting-card">
                    <h3 class="setting-title">程序设置</h3>
                    <div class="form-group">
                        <label for="game-path">游戏路径:</label>
                        <div class="file-input-group">
                            <input type="text" id="game-path" placeholder="选择游戏安装路径">
                            <button class="action-btn secondary" onclick="browseFolder('game-path')">
                                <i class="fas fa-folder-open"></i> 浏览
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="debug-mode">
                            <span class="checkmark"></span>
                            启用调试模式
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="auto-check-update" checked>
                            <span class="checkmark"></span>
                            启动时自动检查更新
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="delete-updating">
                            <span class="checkmark"></span>
                            更新时删除废弃的包
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="update-use-proxy" checked>
                            <span class="checkmark"></span>
                            更新通过镜像加速
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="update-only-stable" checked>
                            <span class="checkmark"></span>
                            仅更新稳定版本
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="api-crypto" checked>
                            <span class="checkmark"></span>
                            加密api配置
                        </label>
                        <small class="form-hint">修改后请在api配置界面进行保存后关闭</small>
                    </div>

                    <div class="form-group">
                        <label for="github-max-workers">Github代理重试线程数:</label>
                        <div class="input-with-icon">
                            <i class="fas fa-hashtag"></i>
                            <input type="number" id="github-max-workers" placeholder="例如：100">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="github-timeout">Githut代理超时秒数:</label>
                        <div class="input-with-icon">
                            <i class="fas fa-hashtag"></i>
                            <input type="number" id="github-timeout" placeholder="例如：100">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="enable-cache" onchange="toggleCachePathInput()">
                            <span class="checkmark"></span>
                            启用资源缓存
                        </label>
                        
                        <div id="cache-path-group" class="sub-form-group" style="display: none; margin-top: 10px;">
                            <label for="cache-path">缓存路径:</label>
                            <div class="file-input-group">
                                <input type="text" id="cache-path" placeholder="tmp" value="tmp">
                                <button class="action-btn secondary" onclick="pywebview.api.browse_folder('cache-path')">
                                    <i class="fas fa-folder-open"></i> 浏览
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="enable-storage" onchange="toggleStoragePathInput()">
                            <span class="checkmark"></span>
                            启用数据持久化
                        </label>
                        
                        <div id="storage-path-group" class="sub-form-group" style="display: none; margin-top: 10px;">
                            <label for="storage-path">缓存路径:</label>
                            <div class="file-input-group">
                                <input type="text" id="storage-path" placeholder="tmp" value="tmp">
                                <button class="action-btn secondary" onclick="pywebview.api.browse_folder('storage-path')">
                                    <i class="fas fa-folder-open"></i> 浏览
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="action-area">
                        <button class="primary-btn" onclick="saveSettings()">
                            <i class="fas fa-save"></i>
                            保存设置
                        </button>
                    </div>
                </div>
                
                <div class="setting-card">
                    <h3 class="setting-title">配置操作</h3>
                    <div class="action-grid">
                        <button class="action-btn" onclick="useDefaultConfig()">
                            <i class="fas fa-file-alt"></i>
                            使用默认配置
                        </button>
                    </div>

                    <div class="action-grid">
                        <button class="action-btn danger" onclick="resetConfig()">
                            <i class="fas fa-redo"></i>
                            重置配置
                        </button>
                    </div>
                    
                    <div class="action-grid">
                        <button class="action-btn" onclick="manualCheckUpdates()">
                            <i class="fas fa-sync-alt"></i>
                            检查更新
                        </button>
                    </div>

                    <div class="action-grid">
                        <button class="action-btn" onclick="goTestSection(true)">
                            <i class="fas fa-sync-alt"></i>
                            进入调试页面
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Launcher配置界面 -->
        <div id="launcher-config-section" class="content-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-rocket"></i>
                    Launcher配置
                </h2>
                <p class="section-subtitle">配置游戏启动器相关选项</p>
            </div>
            
            <div class="settings-grid">
                <div class="setting-card">
                    <h3 class="setting-title">零协汉化配置</h3>
                    <div class="form-group">
                        <label for="launcher-zero-zip-type">压缩格式:</label>
                        <div class="select-wrapper">
                            <select id="launcher-zero-zip-type">
                                <option value="zip">ZIP格式</option>
                                <option value="seven">7Z格式</option>
                            </select>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="launcher-zero-download-source">文本下载来源:</label>
                        <div class="select-wrapper">
                            <select id="launcher-zero-download-source">
                                <option value="github">从github下载</option>
                                <option value="mirror">从公益镜像下载 beta</option>
                            </select>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="launcher-zero-use-proxy" checked>
                            <span class="checkmark"></span>
                            使用代理加速下载
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="launcher-zero-use-cache" checked>
                            <span class="checkmark"></span>
                            使用本地字体缓存
                        </label>
                        <small class="form-hint">使用本地已有的字体文件，加快下载速度</small>
                    </div>
                </div>
                
                <div class="setting-card">
                    <h3 class="setting-title">OurPlay配置</h3>
                    <div class="form-group">
                        <label for="launcher-ourplay-font-option">字体处理选项:</label>
                        <div class="select-wrapper">
                            <select id="launcher-ourplay-font-option">
                                <option value="keep">保留原字体</option>
                                <option value="simplify">精简字体</option>
                                <option value="llc">使用本地字体缓存</option>
                            </select>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="launcher-ourplay-use-api" checked>
                            <span class="checkmark"></span>
                            使用API获取版本信息
                        </label>
                    </div>
                </div>

                <div class="setting-card">
                    <h3 class="setting-title">LCTA-AU汉化配置</h3>
                    
                    <div class="form-group">
                        <label for="launcher-machine-download-source">文本下载来源:</label>
                        <div class="select-wrapper">
                            <select id="launcher-machine-download-source">
                                <option value="github">从github下载</option>
                                <option value="mirror">从公益镜像下载 beta</option>
                            </select>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="launcher-zero-use-proxy" checked>
                            <span class="checkmark"></span>
                            使用代理加速下载
                        </label>
                    </div>
                    
                </div>
                
                <div class="setting-card">
                    <h3 class="setting-title">工作模式配置</h3>
                    <div class="form-group">
                        <label for="launcher-work-update">更新模式:</label>
                        <div class="select-wrapper">
                            <select id="launcher-work-update">
                                <option value="no">不自动更新</option>
                                <option value="llc">仅零协更新</option>
                                <option value="ourplay">仅ourplay更新</option>
                                <option value="LCTA-AU">仅LCTA-AU更新</option>
                                <option value="LO">更新llc+ourplay</option>
                                <option value="LM-G">更新llc+LCTA-AU (github)</option>
                                <option value="LM-A">更新llc+LCTA-AU (API Beta)</option>
                            </select>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="launcher-work-mod" checked>
                            <span class="checkmark"></span>
                            启用MOD支持
                        </label>
                        <small class="form-hint">启用后将加载MOD并启动游戏</small>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="launcher-work-bubble" checked>
                            <span class="checkmark"></span>
                            启用气泡文本
                        </label>
                        <small class="form-hint">启用后将自动更新气泡文本模组</small>
                    </div>

                    <div class="form-group" id="steam-command">
                        <label for="steam-command">steam命令</label>
                        <div class="steam-command-group" style="display: flex; align-items: center; gap: 8px;">
                            <input type="text" id="steam-cmd" placeholder="复制steam命令" readonly 
                                style="flex: 1; min-width: 0;">
                            <button class="action-btn secondary" onclick="copySteamPath()">
                                <i class="fas fa-folder-open"></i> 复制
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="action-area">
                <button class="primary-btn" onclick="saveSettings()">
                    <i class="fas fa-save"></i>
                    保存配置
                </button>
            </div>
        </div>

        <!-- 测试界面 -->
        <div id="test-section" class="content-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-cog"></i>
                    调试界面
                </h2>
                <p class="section-subtitle">测试使用</p>
            </div>

            <div class="action-area">
                <button class="primary-btn" onclick="pywebview.api.startTest()">
                    <i class="fas fa-play"></i>
                    开始启动
                </button>

                <button class="primary-btn" onclick="pywebview.api.eval_skip()">
                    <i class="fas fa-play"></i>
                    注入js
                </button>

                <button class="primary-btn" onclick="pywebview.api.sign_eval_js()">
                    <i class="fas fa-play"></i>
                    为窗口订阅js
                </button>

                <button class="primary-btn" onclick="location.reload(true)">
                    <i class="fas fa-play"></i>
                    强制刷新缓存并重载
                </button>
            </div>
        </div>
    </div>

    

    <!-- 模态窗口容器 -->
    <div id="modal-container"></div>

    <!-- 最小化窗口容器 -->
    <div id="minimized-container"></div>

    <script src="script.js"></script>
</body>
</html>